{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="apple-touch-icon" sizes="76x76" href="{% static 'assets/img//apple-icon.png' %}">
    <link rel="icon" type="image/png" href="{% static 'assets/img//favicon.png' %}">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>
        McBoutique
    </title>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
        name='viewport' />
    <!--     Fonts and icons     -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">
    <link href="/templates/home.css" rel="stylesheet">
    <!-- CSS Files -->
    <link href="{% static 'assets/css/bootstrap.min.css' %}" rel="stylesheet" />
    <link href="{% static 'assets/css/paper-dashboard.css' %}" rel="stylesheet" />
    <!-- CSS Just for demo purpose, don't include it in your project -->
    <link href="{% static 'assets/demo/demo.css' %}" rel="stylesheet" />
</head>

<style>

    .badge.badge-success {
        border-color: #6bd098;
        background-color: #6bd098;
        max-width: 100%;
        /* overflow:hidden; */
    }

    /* .card-login{
        width: 40vw;
        justify-content: center; align-items: center;
    } */
    .text-area-styles {
        height: 40vh;
        width: 60vw;
        box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;
        border: #fbc658 solid 1px;
        box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
        
    }

    .word-count{
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: #fbc658;
        margin-left: 5%;
        height: 50px;
        width: 150px;
        margin-bottom: 10px;
        border-radius: 5px;
        font-weight: bold;
    }
    
.word-count-span{
    display: flex;
    justify-content: center;
    align-items: center;
    margin-left: 3px;
    background-color: #f7b126;
    border: black 1px solid;
    width: 20px;
}


    textarea {
        border: none;
        background-color: transparent;
        resize: none;
        outline: none;
    }
</style>

<body class="login-page">
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-absolute fixed-top navbar-transparent" style="display:flex; ">
        <div class="container">
            <div class="navbar-wrapper">
                <div class="navbar-toggle">
                    <button type="button" class="navbar-toggler">
                        <span class="navbar-toggler-bar bar1"></span>
                        <span class="navbar-toggler-bar bar2"></span>
                        <span class="navbar-toggler-bar bar3"></span>
                    </button>
                </div>
                <a class="navbar-brand" href="javascript:;">McBoutique</a>

            </div>
        </div>
    </nav>
    <!-- End Navbar -->
    <div class="wrapper wrapper-full-page ">
        <div class=" full-page section-image" filter-color="black" data-image="{% static 'assets/img/bg/bg.jpg' %}">
            <!--   you can change the color of the filter page using: data-color="blue | purple | green | orange | red | rose " -->
            <div class="content">
                <div class="container" style="margin-top: 0 !important;">
                    <div class="col-lg-12 col-md-6 ml-auto mr-auto">
                        <form class="form" method="POST" action="{% url 'MULTIPRODUCT' %}">
                            {% csrf_token %}
                            <div class="card card-login" style="size: 60vw;">
                                <div class="card-header ">
                                    <div class="card-header ">
                                        <h3 class="header text-center">Get Products</h3>
                                        <!-- <button size="sm" type="button" class="btn btn-primary btn-primary-custom" >
                                            Word Count: <span class="badge bg-secondary" id="show">0</span>
                                          </button> -->
                                        <div class="word-count" style="margin-right: 500px;">Total URLs:
                                            <span class="word-count-span" id="show">0</span>
                                        </div>

                                        <div class="form-wrapper" style="background-color: #6bd098;">
                                            <small id="result"></small>
                                        </div>
                                    </div>
                                </div>


                                <div
                                    style="display: flex; flex-direction:column; justify-content: center; align-items: center;">
                                    <div class="mb-3">
                                        
                                         <textarea onkeyup="countWords()" placeholder="https://stackoverflow.com/questions/11586038/how-to-get-the-value-from-the-drop-down-box-django" name="textarea1" class="text-area-styles" id="area"></textarea>

                                        <!-- <textarea onkeyup="countWords()" class="text-area-styles" id="area" cols="60" rows="20" value="sorted" name="textarea1"
                                        placeholder="https://www.w3schools.com/jsref/prop_textarea_value.asphttps://www.w3schools.com/jsref/prop_textarea_value.asp">

                                        </textarea> -->


                                    </div>

                                    <div class="row">

                                        <div class="col-md-12 text-right">
                                            {% if file %}
                                            <a href="{{ file }}" class="btn btn-warning btn-round"
                                                style=" color: white;">Download CSV File</a>
                                            {% endif %}
                                            <!-- <a href="#" class="btn  btn-round" style= " color: white;">Download CSV File</a> -->

                                            <button type="submit"
                                                class="btn btn-warning btn-round  mb-3">Submit</button>
                                        </div>
                                    </div>

                                </div>

                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <footer class="footer footer-black  footer-white ">
                <div class="container-fluid">
                    <div class="row">
                        <div class="credits ml-auto">
                            <span class="copyright">
                                Â© 2021 Powered by <a href="https://esquall.com/" target="_blank">eSquall
                                    Technologies</a>
                            </span>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>
    <!--   Core JS Files   -->
    <script src="{% static 'assets/js/core/jquery.min.js' %}"></script>
    <script src="{% static 'assets/js/core/popper.min.js' %}"></script>
    <script src="{% static 'assets/js/core/bootstrap.min.js' %}"></script>
    <script src="{% static 'assets/js/plugins/perfect-scrollbar.jquery.min.js' %}"></script>
    <script src="{% static 'assets/js/plugins/moment.min.js' %}"></script>
    <!--  Plugin for Switches, full documentation here: http://www.jque.re/plugins/version3/bootstrap.switch/ -->
    <script src="{% static 'assets/js/plugins/bootstrap-switch.js' %}"></script>
    <!--  Plugin for Sweet Alert -->
    <script src="{% static 'assets/js/plugins/sweetalert2.min.js' %}"></script>
    <!-- Forms Validations Plugin -->
    <script src="{% static 'assets/js/plugins/jquery.validate.min.js' %}"></script>
    <!--  Plugin for the Wizard, full documentation here: https://github.com/VinceG/twitter-bootstrap-wizard -->
    <script src="{% static 'assets/js/plugins/jquery.bootstrap-wizard.js' %}"></script>
    <!--	Plugin for Select, full documentation here: http://silviomoreto.github.io/bootstrap-select -->
    <script src="{% static 'assets/js/plugins/bootstrap-selectpicker.js' %}"></script>
    <!--  Plugin for the DateTimePicker, full documentation here: https://eonasdan.github.io/bootstrap-datetimepicker/ -->
    <script src="{% static 'assets/js/plugins/bootstrap-datetimepicker.js' %}"></script>
    <!--  DataTables.net Plugin, full documentation here: https://datatables.net/    -->
    <script src="{% static 'assets/js/plugins/jquery.dataTables.min.js' %}"></script>
    <!--	Plugin for Tags, full documentation here: https://github.com/bootstrap-tagsinput/bootstrap-tagsinputs  -->
    <script src="{% static 'assets/js/plugins/bootstrap-tagsinput.js' %}"></script>
    <!-- Plugin for Fileupload, full documentation here: http://www.jasny.net/bootstrap/javascript/#fileinput -->
    <script src="{% static 'assets/js/plugins/jasny-bootstrap.min.js' %}"></script>
    <!--  Full Calendar Plugin, full documentation here: https://github.com/fullcalendar/fullcalendar    -->
    <script src="{% static 'assets/js/plugins/fullcalendar/fullcalendar.min.js' %}"></script>
    <script src="{% static 'assets/js/plugins/fullcalendar/daygrid.min.js' %}"></script>
    <script src="{% static 'assets/js/plugins/fullcalendar/timegrid.min.js' %}"></script>
    <script src="{% static 'assets/js/plugins/fullcalendar/interaction.min.js' %}"></script>
    <!--  Plugin for the Bootstrap Table -->
    <script src="{% static 'assets/js/plugins/nouislider.min.js' %}"></script>
    <!-- Control Center for Now Ui Dashboard: parallax effects, scripts for the example pages etc -->
    <script src="{% static 'assets/js/paper-dashboard.min.js' %}" type="text/javascript"></script>
    <!-- Paper Dashboard DEMO methods, don't include it in your project! -->
    <script src="{% static 'assets/demo/demo.js' %}"></script>
    <script>
        $(document).ready(function () {
            demo.checkFullPageBackgroundImage();
        });
    </script>
    <script>
        function countWords() {

            // Get the input text value
            var text = document
                .getElementById("area").value;

            var count = (text.match(/http/g) || []).length;

            // // Initialize the word counter
            // var numWords = 0;

            // // Loop through the text
            // // and count spaces in it
            // for (var i = 0; i < text.length; i++) {
            //     var currentCharacter = text[i];


            //     // Check if the character is a space
            //     if (currentCharacter == "https") {
            //         numWords += 1;
            //     }
            // }

            // Add 1 to make the count equal to
            // the number of words
            // (count of words = count of spaces + 1)
            // numWords += 1;

            // Display it as output
            document.getElementById("show")
                .innerHTML = count;
            //  document.getElementById("show")
            //      .innerHTML = numWords;
        }

    </script>
    <script>
        // function myFunction() {

        //     const textArea = document.getElementById('url-text-area');
        //     const urls= textArea.value;
        //    textArea.append(`<li> ${urls}`);
        //    console.log(urls);
        // }
        let count = 1;

        area.addEventListener("paste", (e) => {
            let data = e.clipboardData.getData("text");

            let dataArr = data.split("  ");

            console.log("data Array variable", dataArr);

            let mappedArr = dataArr.map((val, index) => {
                return [isValidHttpUrl(val), index];
            });
            let containsURL = {};

            mappedArr.forEach((item) => {
                if (item[0]) {
                    containsURL.contain = true;
                    containsURL.index = item[1];


                }

            });

            if (containsURL.contain)

                dataArr[containsURL.index] = dataArr[containsURL.index] + "\r\n";

            area.value += dataArr.join(" ");


            console.log(area.value);

            event.preventDefault();
        });

        function isValidHttpUrl(string) {
            let url;

            try {
                url = new URL(string);

                console.log("value of the url", url);
            } catch (_) {

                return false;
            }

            return url.protocol === "http:" || url.protocol === "https:";
        }
    </script>

    <!-- <script>
            $('#category').on('change', function(){
                var fd = new FormData();
                fd.append('category', $('#category').val());
                fd.append("csrfmiddlewaretoken", '{{ csrf_token }}');

                $.ajax({
                    type: "POST",
                    contentType: false,
                    processData: false,
                    url: '{% url "getCategoryLength" %}',
                    data: fd,
                    success: function success(data){
                        $('#start').attr('max', data.categoryLength-1)
                        $('#end').attr('max', data.categoryLength)
                    },
                });  
            })

            $('#start').on('change', function(){
                $('#end').attr('min', (parseInt($('#start').val())+1))
            })
        </script> -->
</body>

</html>